# graCli (grace cli)

Customizable cli tool

## Overview

graCli is aimed to be a data driven cli tool with customization, usability and security in mind

## Customization

The main focus of this program is a customization. It is sopported by using .yaml files for configurations, that are easly readable and provide a good customization.

### Command

Main component of configuration, that allows you to set a command used in this program

```yaml
{name}:
  description: "description of the command"
  flags: 
    - list of flags
  params:
  import: ["file to import"]
    - list of params
  subcommands:
    list of subcommands
  run: "command that is supposed to run on this command"
```

### Flag

Optional parameters of command that can contain additional parameters

```yaml
names: ["list", "of", "names"]
id: "Id of the flag used in command run"
description: "flag description"
flag_type: "Overwrite/Modify" #Overwrite is replacing a command with its own run, while Moduly only modyfies the result
params:
  - list of params
run: "command to run on flag_type: Overwrite"
```

### Param

Required parameter of command with its own order and can be used in ``run`` using ``{param_name}``

```yaml
name: "param_name"
param_type: "String/Int/Float/Bool" # type of the parameter
```


### Example configuration

```yaml
set:
  description: "top-level command for setting system parameters"
  flags: 
    - names: ["-v", "--verbose"]
      flag_type: "Modify"
      description: "Enable verbose output"
  import: ["plugins.config2"]
  subcommands:
    wallpaper:
      description: "Set the desktop wallpaper"
      run: "set_wallpaper"
      params:
        - name: "image_path"
          param_type: "String"
      flags:
        - names: ["--preview"]
          flag_type: "Overwrite"
          description: "Preview the wallpaper before applying"
```

## Usability

The program will have few additional functions, that will make it easier to use it. Some of them include: 

- Automatic --help flag that would create a list of every subcommand, flag and params, for the used convinience
- Remember flag ``-r / --remember {name}`` that would allow for saving commands to a list of remembered commands, to run all at once using ``--default recall {name}``
- Allows importing orger configs as subcommands using lua like syntax where every file path begins with ``~/.config/gracli``
- allows to change used config by running ``--default set config {name}``, where ``name`` is a path to config that starts in ``~/.config/gracli`` with lua like syntax(folder.file) without file type. Program scans for files with supported type (.yml/.yaml/.gra.yml/.gra.yaml)

## Security

The security will be provided by using ``.sig.yaml`` files that would contain the signature of the config file, generated by using parsed config file, and 32 random char key, that would be stored in ``defaults.gra.yaml`` file stored in ``~/.config/gracli`` location. To generate the signature file, you would be required to verify the config file, and it would prevent the generation, if the file would be faulty, of if any blacklisted commands would be used (eg. "rm -rf /\*"). It would not check any .sh files that are being run, so it is advised to check the content of those file, before usage. For quick run of the config without generating signature, it will be possible to pass --dev flag, to skip the verification.

## Roadmap
- [x] Parsing config file to rust structs
- [x] Parsing command based on configs
- [ ] Default commands
- [x] Generating signatures
- [ ] running commands
- [ ] remembering commands
- [x] importing other files
